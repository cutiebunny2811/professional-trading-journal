<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
    <title>Option Leverage Calc</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    <style>
        body { font-family: 'Inter', sans-serif; background-color: #09090b; color: #e4e4e7; }
        input { background-color: #18181b; border-color: #27272a; color: white; outline: none; }
        input:focus { border-color: #10b981; }
        .fade-in { animation: fadeIn 0.3s ease-out; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(5px); } to { opacity: 1; transform: translateY(0); } }
    </style>
</head>
<body class="min-h-screen p-4 md:p-8 flex justify-center items-start fade-in">

    <div class="max-w-md w-full space-y-6">
        
        <div class="flex items-center gap-3 mb-6">
            <div class="bg-gradient-to-br from-blue-500 to-indigo-600 p-3 rounded-xl shadow-lg shadow-blue-900/20">
                <i data-lucide="zap" class="w-6 h-6 text-white"></i>
            </div>
            <div>
                <h1 class="text-2xl font-bold text-white tracking-tight">Option <span class="text-zinc-500">Leverage</span></h1>
                <p class="text-xs text-zinc-500">Risk & Impact Calculator</p>
            </div>
        </div>

        <div class="bg-zinc-900 border border-zinc-800 rounded-3xl p-6 shadow-xl space-y-5">
            
            <div class="bg-zinc-950 p-1 rounded-xl flex">
                <button onclick="setType('Call')" id="btn-call" class="flex-1 py-2 rounded-lg text-sm font-bold bg-emerald-600 text-white shadow transition-all">CALL (Long)</button>
                <button onclick="setType('Put')" id="btn-put" class="flex-1 py-2 rounded-lg text-sm font-bold text-zinc-500 hover:text-white transition-all">PUT (Short)</button>
            </div>

            <div class="grid grid-cols-2 gap-4">
                <div>
                    <label class="text-[10px] text-zinc-500 uppercase font-bold tracking-wider mb-1 block">Option Cost ($)</label>
                    <input type="number" id="inp-cost" placeholder="e.g. 2.50" class="w-full bg-black border border-zinc-800 rounded-xl p-3 text-white font-bold text-lg" step="0.01">
                </div>
                <div>
                    <label class="text-[10px] text-zinc-500 uppercase font-bold tracking-wider mb-1 block">Stock Price ($)</label>
                    <input type="number" id="inp-stock" placeholder="e.g. 150.00" class="w-full bg-black border border-zinc-800 rounded-xl p-3 text-white font-bold text-lg" step="0.01">
                </div>
            </div>

            <div>
                <label class="text-[10px] text-zinc-500 uppercase font-bold tracking-wider mb-1 block">Delta (Δ)</label>
                <input type="number" id="inp-delta" placeholder="e.g. 0.50" class="w-full bg-black border border-zinc-800 rounded-xl p-3 text-blue-400 font-bold text-lg" step="0.01">
            </div>
        </div>

        <div id="output-section" class="grid grid-cols-2 gap-4 hidden fade-in">
            
            <div class="col-span-2 bg-zinc-900 border border-zinc-800 rounded-3xl p-6 flex items-center justify-between shadow-xl">
                <div>
                    <p class="text-[10px] text-zinc-500 uppercase font-bold tracking-wider mb-1">Effective Leverage</p>
                    <h2 id="out-leverage" class="text-4xl font-black text-white">0.0x</h2>
                    <p class="text-xs text-zinc-500 mt-1">อัตราทดที่คุณกำลังเล่นอยู่</p>
                </div>
                <div class="bg-zinc-950 p-3 rounded-2xl border border-zinc-800">
                    <i data-lucide="gauge" class="w-8 h-8 text-indigo-400"></i>
                </div>
            </div>

            <div class="bg-zinc-900 border border-zinc-800 p-5 rounded-2xl shadow-xl">
                <div class="flex items-center gap-2 mb-2">
                    <i data-lucide="dollar-sign" class="w-4 h-4 text-emerald-500"></i>
                    <span class="text-[10px] text-zinc-500 uppercase font-bold">If Stock Moves $1</span>
                </div>
                <p id="out-dollar-move" class="text-xl font-bold text-white">±$0.00</p>
                <p class="text-[10px] text-zinc-500 mt-1">Option ขยับเท่านี้ต่อ 1 ดอลลาร์</p>
            </div>

            <div class="bg-zinc-900 border border-zinc-800 p-5 rounded-2xl shadow-xl">
                <div class="flex items-center gap-2 mb-2">
                    <i data-lucide="percent" class="w-4 h-4 text-blue-500"></i>
                    <span class="text-[10px] text-zinc-500 uppercase font-bold">If Stock Moves 1%</span>
                </div>
                <p id="out-percent-move" class="text-xl font-bold text-white">±0.0%</p>
                <p class="text-[10px] text-zinc-500 mt-1">Option จะกำไร/ขาดทุน (%)</p>
            </div>

            <div class="col-span-2 bg-rose-500/10 border border-rose-500/30 rounded-2xl p-5 shadow-xl">
                <div class="flex items-center gap-2 mb-1">
                    <i data-lucide="alert-triangle" class="w-4 h-4 text-rose-500"></i>
                    <span class="text-xs text-rose-500 uppercase font-bold">Wipeout Risk (พอร์ตแตก)</span>
                </div>
                <p id="out-wipeout" class="text-sm text-zinc-300 mt-1">
                    หากหุ้นแม่ผิดทางเพียง <span id="wipeout-val" class="font-bold text-rose-400">0.0%</span> มูลค่า Option ของคุณอาจกลายเป็นศูนย์ (-100%)
                </p>
            </div>

        </div>

        <div class="text-center text-[10px] text-zinc-600 mt-4">
            *คำนวณแบบ Linear Based บน Delta ณ ปัจจุบัน (ไม่รวม Gamma)
        </div>

    </div>

    <script>
        lucide.createIcons();
        
        let type = 'Call';
        const inpCost = document.getElementById('inp-cost');
        const inpStock = document.getElementById('inp-stock');
        const inpDelta = document.getElementById('inp-delta');
        const outputSection = document.getElementById('output-section');

        [inpCost, inpStock, inpDelta].forEach(el => el.addEventListener('input', calculate));

        function setType(t) {
            type = t;
            const btnCall = document.getElementById('btn-call');
            const btnPut = document.getElementById('btn-put');
            
            if(t === 'Call') {
                btnCall.className = "flex-1 py-2 rounded-lg text-sm font-bold bg-emerald-600 text-white shadow transition-all";
                btnPut.className = "flex-1 py-2 rounded-lg text-sm font-bold text-zinc-500 hover:text-white transition-all";
            } else {
                btnCall.className = "flex-1 py-2 rounded-lg text-sm font-bold text-zinc-500 hover:text-white transition-all";
                btnPut.className = "flex-1 py-2 rounded-lg text-sm font-bold bg-rose-600 text-white shadow transition-all";
            }
            calculate();
        }

        function calculate() {
            const cost = parseFloat(inpCost.value);
            const stock = parseFloat(inpStock.value);
            const delta = Math.abs(parseFloat(inpDelta.value)); // ใช้ Absolute เสมอ

            if (!cost || !stock || !delta) {
                outputSection.classList.add('hidden');
                return;
            }

            outputSection.classList.remove('hidden');

            // 1. คำนวณ Leverage = (Delta * Stock Price) / Option Cost
            const leverage = (delta * stock) / cost;
            
            // 2. ถ้าหุ้นขยับ $1 -> Option ขยับ = Delta
            const dollarMove = delta;

            // 3. ถ้าหุ้นขยับ 1% -> Option ขยับ % = Leverage
            // (เพราะ 1% ของแม่ จะถูกคูณด้วยอัตราทด)
            const percentMove = leverage;

            // 4. Wipeout (พอร์ตแตก) -> หุ้นผิดทางกี่ % ถึงจะ -100%
            const wipeout = 100 / leverage;

            // อัปเดตหน้าจอ
            document.getElementById('out-leverage').innerText = leverage.toFixed(1) + 'x';
            
            document.getElementById('out-dollar-move').innerText = '±$' + dollarMove.toFixed(4);
            
            document.getElementById('out-percent-move').innerText = '±' + percentMove.toFixed(1) + '%';
            
            document.getElementById('wipeout-val').innerText = wipeout.toFixed(2) + '%';
            
            // เปลี่ยนสีตามความเสี่ยง (Leverage > 20 ถือว่าซิ่งมาก)
            const levEl = document.getElementById('out-leverage');
            if (leverage > 20) {
                levEl.className = "text-4xl font-black text-rose-500";
            } else if (leverage > 10) {
                levEl.className = "text-4xl font-black text-orange-400";
            } else {
                levEl.className = "text-4xl font-black text-emerald-400";
            }
        }
    </script>
</body>
</html>
